generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 🧩 Model Employee - Dữ liệu nhân viên
model Employee {
  id   String @id @default(uuid()) // ID nhân viên (UUID)
  name String @unique // Họ và tên nhân viên (CVDV) - KHÔNG ĐƯỢC TRÙNG

  // Quan hệ: 1 nhân viên có nhiều chỉ tiêu và nhiều kết quả thực tế
  targets Target[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// 🧩 Model Target - Chỉ tiêu nhân viên theo tháng + năm
model Target {
  id         String   @id @default(uuid()) // ID chỉ tiêu (UUID)
  employeeId String // Liên kết nhân viên
  employee   Employee @relation(fields: [employeeId], references: [id])

  month Int // Tháng (1-12)
  year  Int // Năm (vd: 2024)

  tripTarget  Int // Chỉ tiêu lượt xe
  actualTrips Int @default(0) // Số lượt xe thực tế 

  revenueTarget String // Chỉ tiêu doanh thu
  actualRevenue String @default("0") // Doanh thu thực tế

  createdAt DateTime @default(now()) // Thời gian tạo
  updatedAt DateTime @updatedAt // Thời gian cập nhật

  @@unique([employeeId, month, year]) // 1 nhân viên chỉ có 1 chỉ tiêu / tháng / năm
}
